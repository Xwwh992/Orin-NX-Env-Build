Orin  NX Jetpack 默认没开CH341，会导致无法使用USB转TTL，也就是在dev下找不到ttyUSB0，下面操作在NX上进行

需要：

1. 获取并解压内核源码。
2. 配置内核，启用 CONFIG_USB_SERIAL_CH341模块。
3. 编译所需的内核模块（不需要完整编译内核）。
4. 安装编译好的模块，并加载。

**Jetson Linux网站**

https://developer.nvidia.com/embedded/jetson-linux-archive

**自定义内核官方教程**

https://docs.nvidia.com/jetson/archives/r36.4.3/DeveloperGuide/SD/Kernel/KernelCustomization.html

### 安装依赖

```
sudo apt update
sudo apt install libncurses5-dev libncursesw5-dev pkg-config

sudo apt install libssl-dev
```

brltty是一个盲文显示支持服务，它会抢占 USB-Serial 接口，阻止 ttyUSBx设备创建。

```
sudo apt remove brltty
```

### 下载官方源码

下载SOURCES里面第一个

![image-20250913200739464](./images/image-20250913200739464.png)

### 源码解压

```
准备源码目录结构

cd  ~/Downloads/

mkdir -p ~/JetsonLinux/Linux_for_Tegra
tar xf public_sources.tbz2 -C ~/JetsonLinux/

解压内核源码及模块

cd ~/JetsonLinux/Linux_for_Tegra/source
tar xf kernel_src.tbz2
tar xf kernel_oot_modules_src.tbz2
tar xf nvidia_kernel_display_driver_source.tbz2
```

```
进入内核源码目录并修改版本标识

cd kernel/kernel-jammy-src
```

修改 Makefile，比如 sudo nano Makefile 确保它匹配当前运行的内核版本：

```
VERSION = 5
PATCHLEVEL = 15
SUBLEVEL = 148
EXTRAVERSION = -tegra
```

EXTRAVERSION = -tegra 非常关键！这一步将确保模块编译输出在/lib/modules/5.15.148-tegra/中。

### 源码配置修改与编译

获取当前系统配置

zcat /proc/config.gz > .config

开启 `CH341` 模块

make menuconfig

路径：

`Device Drivers` → `USB Support` → `USB Serial Converter support`

→ `USB Winchiphead CH341 Single Port Serial Driver`

选中之后按  `M`

![image-20250913201213950](./images/image-20250913201213950.png)

![image-20250913201219619](./images/image-20250913201219619.png)

编译内核模块

make  -j8

![image-20250913201231906](./images/image-20250913201231906.png)

安装模块到系统目录

sudo make modules_install

刷新模块依赖并加载模块

sudo depmod -a 5.15.148-tegra sudo modprobe ch341

验证加载成功

lsmod | grep ch341

### 补充

- 如果 `make modules_install` 后模块不在正确的 `/lib/modules/5.15.148-tegra/` 路径下，可手动复制 `.ko` 文件过去再运行 `depmod`。
- 不建议用 `make install` 替换系统内核，除非真的需要。